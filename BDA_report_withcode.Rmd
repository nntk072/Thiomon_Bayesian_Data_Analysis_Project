---
title: "Thiomon Data Analysis Report"
author: "Anonymous"
output: 
  pdf_document: 
    toc: yes
    toc_depth: 5
bibliography: references.bib 
csl: vancouver.csl
editor_options: 
  chunk_output_type: console
---

```{r include=FALSE}
setwd("/notebooks/bda2024/Bayes_project")
# setwd("C:/Users/nguyenl37/Downloads/Bayes_project/")
# setwd("C:/Users/nguye/OneDrive - Aalto University/University/First year/Project/Bayes_project")
SEED = 42
if (!require(readr)) {
    install.packages("readr")
    library(readr)
}

if (!require(rstan)) {
    install.packages("rstan")
    library(rstan)
}
if (!require(loo)) {
    install.packages("loo")
    library(loo)
}
if (!require(gridExtra)) {
    install.packages("gridExtra")
    library(gridExtra)
}
if (!require(grid)) {
    install.packages("grid")
    library(grid)
}
if (!require(rmarkdown)) {
    install.packages("rmarkdown")
    library(rmarkdown)
}


if (!require(tidybayes)) {
    install.packages("tidybayes")
    library(tidybayes)
}
if (!require(brms)) {
    install.packages("brms")
    library(brms)
}
if (!require(metadat)) {
  install.packages("metadat")
  library(metadat)
}
if(!require(cmdstanr)){
    install.packages("cmdstanr", repos = c("https://mc-stan.org/r-packages/", getOption("repos")))
    library(cmdstanr)
}
cmdstan_installed <- function(){
  res <- try(out <- cmdstanr::cmdstan_path(), silent = TRUE)
  !inherits(res, "try-error")
}
if(!cmdstan_installed()){
    install_cmdstan()
}
if(!require(ggplot2)){
    install.packages("ggplot2")
    library(ggplot2)
}
ggplot2::theme_set(theme_minimal(base_size = 14))
if(!require(bayesplot)){
    install.packages("bayesplot")
    library(bayesplot)
}
if(!require(posterior)){
    install.packages("posterior")
    library(posterior)
}
if (!require(priorsense)) {
  install.packages("priorsense")
  library(priorsense)
}
if (!require(tibble)) {
  install.packages("tibble")
  library(tibble)
}
if (!require(RColorBrewer)) {
  install.packages("RColorBrewer")
  library(RColorBrewer)
}
if (!require(dplyr)) {
  install.packages("dplyr")
  library(dplyr)
}
if (!require(tinytable)) {
  install.packages("tinytable")
  library(tinytable)
}
options(tinytable_format_num_fmt = "significant_cell", tinytable_format_digits = 2, tinytable_tt_digits=2)

```


```{r include=FALSE}
suppressPackageStartupMessages(library(aaltobda))
suppressPackageStartupMessages(library(rstan))
suppressPackageStartupMessages(library(dplyr))
suppressPackageStartupMessages(library(ggplot2))
suppressPackageStartupMessages(library(loo))
suppressPackageStartupMessages(library(bayesplot))
suppressPackageStartupMessages(library(gridExtra))
suppressPackageStartupMessages(library(grid))
suppressPackageStartupMessages(library(rmarkdown))
suppressPackageStartupMessages(library(tidybayes))
suppressPackageStartupMessages(library(brms))
suppressPackageStartupMessages(library(metadat))
suppressPackageStartupMessages(library(cmdstanr))
suppressPackageStartupMessages(library(priorsense))
suppressPackageStartupMessages(library(tibble))
suppressPackageStartupMessages(library(RColorBrewer))
suppressPackageStartupMessages(library(dplyr))
suppressPackageStartupMessages(library(tinytable))
suppressPackageStartupMessages(library(posterior))
```


\newpage

(This is an example of using reference)
This study explores the use of machine learning algorithms for predicting clinical outcomes with thiopurines [@10.1093/ecco-jcc/jjx014].
you can change the sections/subsections/name according to your idea

# 1. Introduction

# 1.1. Motivation

# 1.2. Problem Statement

# 1.3. Main Modeling Summary

# 2. Data: Thiomon Dataset

## 2.1. Data description

## 2.2. Data preprocessing 
Variable Selection includes here

# 3. Priors

## 3.1. Variables characteristics
Showing that the data follow normal distribution
## 3.2. Variables prior description 
Choosing by mean/std

# 4. Models

## 4.1. Pooled model

## 4.2. Separate model

## 4.3. Hierarchical model

## 4.4. Non-Bayesian model


# 5. Convergence diagnostics

## 5.1. $\widehat{R}$

## 5.2. Effective sample size

## 5.3. Divergent transitions  

## 5.4. Conclusion about convergence

# 6. Posterior predictive checks 

## 6.1. Separate Model

## 6.2. Hierarchical Model

# 7. Predictive Performance Assessment

## 7.1. Model accuracy and Confusion matrix

## 7.2. ROC curves and AUC values

## 8. Sensitivity Analysis

# 9. Discussion of Issues and Potential Improvements

# 10. Conclusion

# 11. Self-Reflection

## 11.1. Group Learning
## 11.2. Self Learning
# Appendix

## A. Stan code

### A.1. Pooled model

### A.2. Separate model

### A.3. Hierarchical model

## B. Loaded packages


# References

